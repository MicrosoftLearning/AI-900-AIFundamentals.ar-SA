---
lab:
  title: استكشاف تصنيف الصور
---

# استكشاف تصنيف الصور

توفر الخدمة المعرفية *Computer Vision* نماذج مفيدة مسبقة الصنع للعمل مع الصور، ولكنك ستحتاج غالبًا إلى تدريب نموذجك الخاص على رؤية الكمبيوتر. على سبيل المثال، افترض أن منظمة الحفاظ على الحياة البرية تريد تتبع مشاهد الحيوانات باستخدام كاميرات حساسة للحركة. ويمكن بعد ذلك استخدام الصور التي تلتقطها الكاميرات للتحقق من وجود أنواع معينة في منطقة معينة والمساعدة في جهود حفظ الأنواع المهددة بالانقراض. ولتحقيق ذلك، ستستفيد المنظمة من نموذج *تصنيف الصور* المدرب على تحديد أنواع مختلفة من الحيوانات في الصور الفوتوغرافية الملتقطة.

في Azure، يمكنك استخدام الخدمة المعرفية *** Custom Vision *** لتدريب نموذج تصنيف الصورة بناءً على الصور الموجودة. يوجد عنصران لإنشاء حل تصنيف الصور. أولاً، يجب تدريب نموذج للتعرف على الفئات المختلفة باستخدام الصور الموجودة. بعد ذلك، عندما يتم تدريب النموذج، يجب عليك نشره كخدمة يمكن أن تستهلكها التطبيقات.

لاختبار قدرات خدمة Custom Vision، سنستخدم تطبيق سطر أوامر بسيطًا يتم تشغيله في Cloud Shell. تنطبق نفس المبادئ والوظائف في حلول العالم الحقيقي، مثل مواقع الويب أو تطبيقات الأجهزة المحمولة.

## قبل البدء

لإكمال هذا التمرين المعملي، ستحتاج إلى [اشتراك Azure](https://azure.microsoft.com/free?azure-portal=true) الذي لديك فيه حق الوصول الإداري.

## إنشاء مورد *الخدمات المعرفية*

يمكنك استخدام خدمة Custom Vision بإنشاء إما مورد **رؤية مخصصة** أو مورد ** الخدمات المعرفية**.

>**ملاحظة** لا يتوفر كل مورد في كل منطقة. سواء قمت بإنشاء مورد Custom Vision أو Cognitive Services، فلا يمكن استخدام سوى الموارد التي تم إنشاؤها في [مناطق معينة](https://azure.microsoft.com/global-infrastructure/services/?products=cognitive-services) للوصول إلى خدمات Custom Vision. من أجل البساطة، يتم تحديد المنطقة مسبقاً لك في إرشادات التكوين أدناه.

أنشئ مورد **Cognitive Services** في اشتراكك في Azure.

1. افتح مدخل Azure في [https://portal.azure.com](https://portal.azure.com?azure-portal=true)، وسجّل الدخول باستخدام حساب Microsoft الخاص بك.

1. انقر فوق **&#65291;إنشاء** زر مورد والبحث عن *الخدمات المعرفية* وإنشاء مورد الخدمات **المعرفية ** مع الإعدادات التالية:
    - **الاشتراك**: *اشتراك Azure الخاص بك*.
    - **مجموعة الموارد**: *أنشئ مجموعة موارد جديدة ذات اسم فريد*.
    - **المنطقة**: شرق الولايات المتحدة
    - **الاسم**: *أدخل اسمًا مميزًا*.
    - **مستوى التسعير**: قياسي S0
    - **By checking this box I acknowledge that I have read and understood all the terms below**: محدد.

1. راجع المورد وأنشئه، وانتظر حتى يكتمل التوزيع. ثم انتقل إلى المورد الموزع.

1. عرض صفحة **Keys and Endpoint** لمورد الخدمات المعرفية. ستحتاج نقطة النهاية والمفاتيح للاتصال من تطبيقات العميل.

## إنشاء مشروع Custom Vision

لتدريب نموذج اكتشاف العنصر، تحتاج إلى إنشاء مشروع رؤية مخصصة بناءً على مورد التدريب الخاص بك. للقيام بذلك، ستستخدم مدخل Custom Vision.

1. قم بتنزيل واستخراج صور التدريب من [https://aka.ms/animal-images](https://aka.ms/animal-images). يتم توفير هذه الصور في مجلد مضغوط، والذي عند استخراجه يحتوي على مجلدات فرعية تسمى **الفيل** **والزرافة** **والأسد**.

1. افتح علامة تبويب مستعرض جديدة، واستعرض للوصول إلى مدخل Custom Vision في [https://customvision.ai](https://customvision.ai?azure-portal=true). إذا طُلب منك ذلك، قم بتسجيل الدخول باستخدام حساب Microsoft المرتبط باشتراك Azure الخاص بك ووافق على شروط الخدمة.

1. في مدخل Custom Vision، أنشئ مشروعًا جديدًا بالإعدادات التالية:

    - **الاسم**: تعريف الحيوان
    - **الوصف**: تصنيف الصور للحيوانات
    - **المورد**: *الخدمات المعرفية أو مورد الرؤية المخصصة الذي قمت بإنشائه مسبقا*
    - **أنواع المشاريع**: التصنيف
    - **Classification Types**: متعدد الفئات (علامة واحدة لكل صورة)
    - **المجالات**: عام \[A2]

1. انقر فوق **إضافة صور**، وحدد جميع الملفات الموجودة في مجلد **الفيل** الذي قمت باستخراجه مسبقا. ثم قم بتحميل ملفات الصور، مع تحديد *فيل* العلامة، على النحو التالي:

    ![لقطة شاشة لواجهة تحميل الصورة.](media/create-image-classification-system/upload-elephants.png)

1. استخدم الزر **إضافة صور** ([+]) لتحميل الصور في مجلد **الزرافة** مع *زرافة* العلامة والصور في مجلد **الأسد** مع *أسد* العلامة.

1. استكشف الصور التي قمت بتحميلها في مشروع الرؤية المخصصة - يجب أن يكون هناك 17 صورة لكل فئة، مثل هذا:

    ![لقطة شاشة لصور التدريب ذات العلامات في مدخل Custom Vision.](media/create-image-classification-system/animal-training-images.png)

1. في مشروع Custom Vision، فوق الصور، انقر فوق **"تدريب"** لتدريب نموذج تصنيف باستخدام الصور ذات العلامات. حدد خيار **التدريب السريع** ، ثم انتظر حتى يكتمل تكرار التدريب.

    > **تلميح**: قد يستغرق التدريب بضع دقائق. أثناء الانتظار، تحقق من [كيف يمكن أن تساعد صور الفهود الثلجية الذكاء الاصطناعي في إنقاذ الأنواع من الانقراض](https://news.microsoft.com/transform/snow-leopard-selfies-ai-save-species/)، والذي يصف مشروعا حقيقيا يستخدم رؤية الكمبيوتر لتتبع الحيوانات المهددة بالانقراض في البرية.

1. عند تدريب تكرار النموذج، راجع مقاييس الأداء *الدقة**والاستدعاء*و*AP* - تقيس هذه دقة التنبؤ لنموذج التصنيف، ويجب أن تكون جميعها عالية.

## اختبار النموذج

قبل نشر هذا التكرار للنموذج لتستخدمه التطبيقات، يجب عليك اختباره.

1. فوق مقاييس الأداء، انقر فوق **اختبار سريع**.

1. في المربع **عنوان URL للصورة** ، اكتب `https://aka.ms/giraffe` زر **صورة الاختبار السريع (&#10132;)** وانقر فوقها.

1. عرض التنبؤات التي تم إرجاعها بواسطة النموذج الخاص بك - يجب أن تكون درجة الاحتمال *للزرافة* هي الأعلى، مثل هذا:

    ![لقطة شاشة لواجهة الاختبار السريع.](media/create-image-classification-system/quick-test.png)

1. أغلق نافذة **اختبار سريع**.

## نَشر نموذج تصنيف الصور

أنت الآن جاهز لنشر نموذجك المدرّب واستخدامه من تطبيق عميل.

1. انقر فوق **&#128504; Publish** لنشر النموذج المدربين مع الإعدادات التالية:
    - **اسم النموذج**: الحيوانات
    - **مورد التنبؤ**: *الخدمات المعرفية أو مورد توقع الرؤية المخصصة الذي قمت بإنشائه مسبقا*.

1. بعد النشر، انقر فوق *Prediction URL* (&#127760;) لرؤية المعلومات المطلوبة لاستخدام النموذج المنشور.

    ![لقطة شاشة لعنوان URL للتوقع.](media/create-image-classification-system/prediction-url.png)

لاحقًا، ستحتاج إلى عنوان URL المناسب وقيم مفتاح التنبؤ للحصول على تنبؤ من عنوان URL للصورة، لذلك احتفظ بمربع الحوار هذا مفتوحًا وتابع إلى المهمة التالية.

## إعداد تطبيق عميل

لاختبار قدرات خدمة Custom Vision، سنستخدم تطبيق سطر أوامر بسيط يعمل في cloud shell على Azure.

1. قم بالتبديل مرة أخرى إلى علامة تبويب المستعرض التي تحتوي على مدخل Microsoft Azure، وحدد زر **Cloud shell** (**[>_]**) في أعلى الصفحة إلى يمين مربع البحث. يؤدي هذا إلى فتح جزء cloud shell في أسفل المدخل.

    في المرة الأولى التي تفتح فيها Cloud Shell، قد يُطلب منك اختيار نوع shell التي تريد استخدامها (*Bash* أو *PowerShell).* إذا كان الأمر كذلك، فحدد **PowerShell**.

    إذا تمت مطالبتك بإنشاء تخزين ل Cloud Shell، فتأكد من تحديد اشتراكك وحدد **Create storage**. ثم انتظر دقيقة أو نحو ذلك لإنشاء التخزين.

    عندما تكون shell السحابية جاهزة، يجب أن تبدو مشابهة لما يلي:
    
    ![لقطة شاشة ل shell السحابية في مدخل Microsoft Azure.](media/create-image-classification-system/cloud-shell.png)

    > **تلميح**: تأكد من أن نوع shell المشار إليه في الجزء العلوي الأيسر من جزء Cloud Shell هو *PowerShell*. إذا كان *Bash*، فقم بالتبديل إلى *PowerShell* باستخدام القائمة المنسدلة.

    لاحظ أنه يمكنك تغيير حجم غلاف السحابة عن طريق سحب شريط الفاصل أعلى الجزء، أو باستخدام أيقونات **&#8212;** و **&#9723;** و**X** في أعلى يسار الجزء لتصغير الجزء وتكبيره وإغلاقه. لمزيد من المعلومات حول استخدام Azure Cloud Shell، راجع [وثائق Azure Cloud Shell](https://docs.microsoft.com/azure/cloud-shell/overview).

2. في الأمر shell، أدخل الأوامر التالية لتنزيل الملفات لهذا التمرين وحفظها في مجلد يسمى **ai-900** (بعد إزالة هذا المجلد إذا كان موجودا بالفعل)

    ```PowerShell
    rm -r ai-900 -f
    git clone https://github.com/MicrosoftLearning/AI-900-AIFundamentals ai-900
    ```

3. بعد تنزيل الملفات، أدخل الأوامر التالية للتغيير إلى دليل **ai-900** وتحرير ملف التعليمات البرمجية لهذا التمرين:

    ```PowerShell
    cd ai-900
    code classify-image.ps1
    ```

    لاحظ كيف يفتح هذا محررا مثل المحرر الموجود في الصورة أدناه:

     ![لقطة شاشة لمحرر التعليمات البرمجية في cloud shell.](media/create-image-classification-system/code-editor.png)

     > **تلميح**: يمكنك استخدام شريط الفاصل بين سطر أوامر cloud shell ومحرر التعليمات البرمجية لتغيير حجم الأجزاء.

4. لا تقلق كثيراً بشأن تفاصيل الرمز. الشيء المهم هو أنه يبدأ ببعض التعليمات البرمجية لتحديد عنوان URL للتنبؤ والمفتاح لنموذج Custom Vision الخاص بك. ستحتاج إلى تحديث هذه بحيث تستخدم بقية التعليمات البرمجية النموذج الخاص بك.

    احصل على *عنوان URL للتنبؤ* *ومفتاح التنبؤ* من مربع الحوار الذي تركته مفتوحا في علامة تبويب المستعرض لمشروع Custom Vision. **تحتاج إلى استخدام الإصدارات *إذا كان لديك عنوان URL للصورة*.**

    استخدم هذه القيم لاستبدال **YOUR_PREDICTION_URL** **وحاملي YOUR_PREDICTION_KEY** في ملف التعليمات البرمجية.

    بعد لصق قيم عنوان URL للتنبؤ ومفتاح التنبؤ، يجب أن يتشابه أول سطرين من التعليمات البرمجية مع هذا:

    ```PowerShell
    $predictionUrl="https..."
    $predictionKey ="1a2b3c4d5e6f7g8h9i0j...."
    ```

5. بعد إجراء التغييرات على المتغيرات في التعليمات البرمجية، اضغط **على CTRL+S** لحفظ الملف. ثم اضغط **على CTRL+Q** لإغلاق محرر التعليمات البرمجية.

## اختبار تطبيق العميل

الآن يمكنك استخدام نموذج تطبيق العميل لتصنيف الصور استنادا إلى الحيوان الذي تحتوي عليه.

1. أدخل الأمر التالي في جزء PowerShell لتشغيل التعليمات البرمجية:

    ```PowerShell
    ./classify-image.ps1 1
    ```

    تستخدم هذه التعليمة البرمجية النموذج الخاص بك لتصنيف الصورة التالية:

    ![صورة لزرافة.](media/create-image-classification-system/animal-1.jpg)

1. راجع التنبؤ، والذي يجب أن يكون **زرافة**.

1. الآن دعونا نجرب صورة أخرى. شغَّل هذا الأمر:

    ```PowerShell
    ./classify-image.ps1 2
    ```

    هذه المرة يتم تصنيف الصورة التالية:

    ![صورة لفيل.](media/create-image-classification-system/animal-2.jpg)

1. تحقق من أن النموذج يصنف هذه الصورة على أنها **فيل**.

1. لنجرب واحدة أخرى. شغَّل هذا الأمر:

    ```PowerShell
    ./classify-image.ps1 3
    ```

    تبدو الصورة النهائية كما يلي:

    ![صورة لأسد.](media/create-image-classification-system/animal-3.jpg)

1. تحقق من أن النموذج يصنف هذه الصورة على أنها **أسد**.

نأمل أن يكون نموذج تصنيف الصور الخاص بك قد صنف الصور الثلاث بشكل صحيح.

## معرفة المزيد

يظهر هذا التمرين بعض قدرات خدمة Custom Vision فقط. لمعرفة المزيد حول ما يمكنك القيام به بهذه الخدمة، راجع [صفحة الرؤية المخصصة](https://azure.microsoft.com/services/cognitive-services/custom-vision-service/).
