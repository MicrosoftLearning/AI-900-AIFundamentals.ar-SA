---
lab:
  title: استكشاف الكشف عن العناصر
---

# <a name="explore-object-detection"></a>استكشاف الكشف عن العناصر

> **ملاحظة** لإكمال هذا النشاط المعملي، ستحتاج إلى [اشتراك Azure](https://azure.microsoft.com/free?azure-portal=true) الذي لديك فيه حق الوصول الإداري.

يعد *اكتشاف الكائن* أحد أشكال رؤية الكمبيوتر حيث يتم تدريب نموذج التعلم الآلي على تصنيف الحالات الفردية للكائنات في صورة ما، والإشارة إلى *المربع المحيط* الذي يحدد موقعه. يمكنك التفكير في هذا على أنه تقدم من *تصنيف الصور* (حيث يجيب النموذج على السؤال "ما هذه الصورة؟") إلى حلول بناء حيث يمكننا أن نسأل النموذج "ما هي الكائنات في هذه الصورة، وأين توجد ؟ ".

على سبيل المثال، قد يستخدم محل بقالة نموذجًا لاكتشاف الأشياء لتنفيذ نظام سحب آلي يقوم بمسح حزام ناقل باستخدام كاميرا، ويمكنه تحديد عناصر معينة دون الحاجة إلى وضع كل عنصر على الحزام ومسحها ضوئيًا على حدة.

توفر خدمة **Custom Vision** المعرفية في Microsoft Azure حلاً مستندًا إلى مجموعة النظراء لإنشاء نماذج مخصصة للكشف عن الكائنات ونشرها. في Azure، يمكنك استخدام خدمة Custom Vision لتدريب نموذج تصنيف الصورة بناءً على الصور الموجودة. هناك عنصران لإنشاء حل تصنيف الصور. أولاً، يجب تدريب نموذج للتعرف على الفئات المختلفة باستخدام الصور الموجودة. بعد ذلك، عندما يتم تدريب النموذج، يجب عليك نشره كخدمة يمكن أن تستهلكها التطبيقات.

لاختبار قدرات خدمة Custom Vision لاكتشاف الكائنات في الصور، سنستخدم تطبيق سطر أوامر بسيط يعمل في Cloud Shell. تنطبق نفس المبادئ والوظائف في حلول العالم الحقيقي، مثل مواقع الويب أو تطبيقات الهاتف.

## <a name="create-a-cognitive-services-resource"></a>إنشاء مورد *الخدمات المعرفية*

يمكنك استخدام خدمة Custom Vision بإنشاء إما مورد **رؤية مخصصة** أو مورد ** الخدمات المعرفية**.

> **ملاحظة** لا يتوفر كل مورد في كل منطقة. سواء قمت بإنشاء مورد Custom Vision أو Cognitive Services، فلا يمكن استخدام سوى الموارد التي تم إنشاؤها في [مناطق معينة](https://azure.microsoft.com/global-infrastructure/services/?products=cognitive-services) للوصول إلى خدمات Custom Vision. من أجل البساطة، يتم تحديد المنطقة مسبقاً لك في إرشادات التكوين أدناه.

أنشئ مورد **Cognitive Services** في اشتراكك في Azure.

1. في علامة تبويب مستعرض أخرى، افتح مدخل Azure في [https://portal.azure.com](https://portal.azure.com?azure-portal=true)، وقم بتسجيل الدخول باستخدام حساب Microsoft الخاص بك.

1. انقر فوق **&#65291;إنشاء** زر مورد والبحث عن *الخدمات المعرفية* وإنشاء مورد الخدمات **المعرفية ** مع الإعدادات التالية:
    - **الاشتراك**: *اشتراك Azure الخاص بك*.
    - **مجموعة الموارد**: *أنشئ مجموعة موارد جديدة ذات اسم فريد*.
    - **المنطقة**: شرق الولايات المتحدة
    - **الاسم**: *أدخل اسمًا مميزًا*.
    - **مستوى التسعير**: قياسي S0
    - **By checking this box I acknowledge that I have read and understood all the terms below**: محدد.

1. راجع المورد وأنشئه، وانتظر حتى يكتمل التوزيع. ثم انتقل إلى المورد الموزع.

1. عرض صفحة **Keys and Endpoint** لمورد الخدمات المعرفية. ستحتاج نقطة النهاية والمفاتيح للاتصال من تطبيقات العميل.

## <a name="create-a-custom-vision-project"></a>إنشاء مشروع Custom Vision

لتدريب نموذج اكتشاف العنصر، تحتاج إلى إنشاء مشروع رؤية مخصصة بناءً على مورد التدريب الخاص بك. للقيام بذلك، ستستخدم مدخل Custom Vision.

1. في علامة تبويب مستعرض جديدة، افتح مدخل "Custom Vision" في [https://customvision.ai](https://customvision.ai?azure-portal=true)، ثم سجل الدخول باستخدام حساب Microsoft المقترن باشتراك Azure.

1. إنشاء مشروع جديد بالإعدادات التالية:
    - **الاسم**: الكشف عن البقالة
    - **الوصف**: الكشف عن كائن للبقالة.
    - **المورد**: * المورد الذي أنشأته مسبقًا*.
    - **أنواع المشروع**: الكشف عن الكائنات
    - **المجالات**: عام

1. انتظر المشروع إلى إنشاء وفتح في المستعرض.

## <a name="add-and-tag-images"></a>إضافة الصور ووضع علامة لها

لتدريب نموذج اكتشاف الكائن، تحتاج إلى تحميل الصور التي تحتوي على الفئات التي تريد أن يحددها النموذج، وتمييزها للإشارة إلى المربعات المحيطة لكل مثيل كائن.

1. تنزيل واستخراج صور التدريب من https://aka.ms/fruit-objects. يحتوي المجلد المستخرج على مجموعة من الصور من الفاكهة.

1. في مدخل Custom Vision [https://customvision.ai](https://customvision.ai?azure-portal=true)، تأكد من أنك تعمل في مشروع الكشف عن الكائنات الخاص بك _Grocery Detection_. ثم حدد **إضافة صور** وحمّل كافة الصور في المجلد المستخرج.

    ![تحميل الصور التي تم تنزيلها بالنقر فوق إضافة الصور.](media/create-object-detection-solution/fruit-upload.jpg)

1. بعد تحميل الصور، حدد أول صورة تفتحها.

1. ضع الماوس فوق أي كائن في الصورة حتى يتم عرض المنطقة المكتشفة تلقائيًا مثل الصورة أدناه. ثم حدد الكائن، وإذا لزم الأمر، قم بتغيير حجم المنطقة المحيطة به.

    ![المنطقة الافتراضية لكائن](media/create-object-detection-solution/object-region.jpg)

    بدلاً من ذلك، يمكنك ببساطة السحب حول الكائن لإنشاء منطقة.

1. عندما تحيط المنطقة بالكائن، أضف علامة جديدة بنوع الكائن المناسب (*التفاح* أو *الموز* أو *البرتقال*) كما هو موضح هنا:

    ![كائن معلم في صورة](media/create-object-detection-solution/object-tag.jpg)

1. حدد كل كائن آخر في الصورة وقم بتمييزه، وقم بتغيير حجم المناطق وإضافة علامات جديدة حسب الحاجة.

    ![كائنان معلمان في صورة](media/create-object-detection-solution/object-tags.jpg)

1. استخدم الرابط **>** الموجود على اليمين للانتقال إلى الصورة التالية، ووضع علامة على كائناتها. ثم استمر في العمل من خلال مجموعة الصور بأكملها، ووضع علامات على كل تفاحة وموز وبرتقال.

1. عند الانتهاء من وضع علامات على الصورة الأخيرة، أغلق محرر **Image Detail** وفي صفحة **Training Images** ضمن **Tags**، حدد **Tagged** لمشاهدة جميع الصور ذات العلامات:

    ![الصور ذات العلامات في مشروع](media/create-object-detection-solution/tagged-images.jpg)

## <a name="train-and-test-a-model"></a>تدريب واختبار نموذج

الآن بعد أن قمت بتمييز الصور في مشروعك، فأنت جاهز لتدريب نموذج.

1. في مشروع Custom Vision، انقر فوق **Train** لتدريب نموذج اكتشاف كائن باستخدام الصور ذات العلامات. حدد خيار **Quick Training**

1. انتظر حتى يكتمل التدريب (قد يستغرق عشر دقائق أو نحو ذلك)، ثم قم بمراجعة مقاييس أداء *Precision* و*Recall* و*mAP* - تقيس تلك دقة الجودة لنموذج اكتشاف الكائن، ويجب أن تكون جميعها عالية.

1. في أعلى يمين الصفحة، انقر فوق **Quick Test**، ثم في المربع **Image URL** أدخل `https://aka.ms/apple-orange` واعرض التوقع الذي تم إنشاؤه. ثم أغلق نافذة **Quick Test**.

## <a name="publish-the-object-detection-model"></a>نشر نموذج الكشف عن الكائنات

أنت الآن جاهز لنشر نموذجك المدرّب واستخدامه من تطبيق عميل.

1. انقر فوق **&#128504; Publish** لنشر النموذج المدربين مع الإعدادات التالية:
    - **اسم النموذج**: الكشف عن إنتاج
    - **Prediction resource**:  *مورد الذي أنشأته مسبقًا*.

1. بعد النشر، انقر فوق *Prediction URL* (&#127760;) لرؤية المعلومات المطلوبة لاستخدام النموذج المنشور. لاحقًا، ستحتاج إلى عنوان URL المناسب وقيم مفتاح التنبؤ للحصول على تنبؤ من عنوان URL للصورة، لذلك احتفظ بمربع الحوار هذا مفتوحًا وتابع إلى المهمة التالية.

## <a name="run-cloud-shell"></a>تشغيل Cloud Shell

لاختبار قدرات خدمة «الرؤية المخصصة»، سنستخدم تطبيق سطر أوامر بسيط يعمل في Cloud Shell على Azure.

1. في مدخل Azure، حدد زر **[>_]** *(Cloud Shell)* أعلى الصفحة يمين مربع البحث. يؤدي ذلك إلى فتح جزء Cloud Shell في أسفل المدخل. 

    ![بدء تشغيل Cloud Shell بالنقر على الرمز الموجود على يمين مربع البحث العلوي](media/create-object-detection-solution/powershell-portal-guide-1.png)

1. في المرة الأولى التي تفتح فيها Cloud Shell، قد يُطلب منك اختيار نوع shell التي تريد استخدامها (*Bash* أو *PowerShell).* حدد **PowerShell**. إذا لم ترى هذا الخيار، تخطي الخطوة.  

1. إذا تمت مطالبتك بإنشاء سعة تخزينية لشركة Cloud Shell، فتأكد من تحديد اشتراكك وحدد **Create storage**. ثم انتظر دقيقة أو نحو ذلك لإنشاء التخزين.

    ![أنشئ التخزين بالنقر فوق «confirm».](media/create-object-detection-solution/powershell-portal-guide-2.png)

1. تأكد من تبديل نوع shell المشار إليه في أعلى يسار جزء Cloud Shell إلى *PowerShell*. إذا كان *Bash*، فقم بالتبديل إلى *PowerShell* باستخدام القائمة المنسدلة.

    ![كيفية العثور على القائمة المنسدلة ناحية اليسار للتبديل إلى PowerShell](media/create-object-detection-solution/powershell-portal-guide-3.png) 

1. انتظر حتى يبدأ PowerShell. يجب أن ترى الشاشة التالية في مدخل Azure:  

    ![انتظر حتى يبدأ PowerShell.](media/create-object-detection-solution/powershell-prompt.png) 

## <a name="configure-and-run-a-client-application"></a>كوّن تطبيق عميل وقم بتشغيله

الآن بعد أن أصبح لديك نموذجًا مخصصًا، يمكنك تشغيل تطبيق عميل بسيط يستخدم خدمة Custom Vision لاكتشاف الكائنات في الصورة.

1. في shell الأمر، أدخل الأمر التالي لتحميل نموذج التطبيق وحفظه إلى مجلد يسمى «ai-900».

    ```PowerShell
    git clone https://github.com/MicrosoftLearning/AI-900-AIFundamentals ai-900
    ```

    >**ملاحظة** إذا كنت قد استخدمت هذا الأمر بالفعل في نشاط معملي آخر لاستنساخ مستودع *ai-900*، فيمكنك تخطي هذه الخطوة.

1. يتم تحميل الملفات إلى مجلد يسمى **ai-900** نريد الآن رؤية جميع الملفات في تخزين Cloud Shell الخاص بك والعمل معهم. اكتب الأمر التالي في shell:

    ```PowerShell
    code .
    ```

    لاحظ كيف يفتح هذا محررًا مثل المحرر الموجود في الصورة أدناه: 

    ![محرر التعليمات البرمجية.](media/create-object-detection-solution/powershell-portal-guide-4.png)

1. في جزء **Files** على اليسار، قم بتوسيع **ai-900** وحدد **detect-objects.ps1**. يحتوي هذا الملف على بعض التعليمات البرمجية التي تستخدم خدمة Custom Vision لاكتشاف الكائنات على صورة، كما هو موضح هنا:

    ![المحرر الذي يحتوي على رمز لاكتشاف العناصر في الصورة](media/create-object-detection-solution/detect-image-code.png)

1. لا تقلق كثيرًا بشأن تفاصيل التعليمة البرمجية، فالشيء المهم هو أنه يحتاج إلى عنوان URL للتنبؤ ومفتاح نموذج الرؤية المخصصة عند استخدام عنوان URL للصورة. 

    احصل على *عنوان URL للتوقع* من مربع الحوار في مشروع Custom Vision الخاص بك. 

    >**ملاحظة** تذكر أنك راجعت *عنوان URL للتوقع* بعد نشر نموذج تصنيف الصور. للعثور على *عنوان URL للتوقع*، انتقل إلى علامة تبويب **الأداء** في مشروعك، ثم انقر فوق **عنوان URL للتوقع** (إذا كانت الشاشة مضغوطة، فقد ترى رمز الكرة الأرضية). سيظهر مربع حوار. انسخ عنوان URL لـ **إذا كان لديك عنوان URL للصورة**. الصقه في محرر التعليمة البرمجية، مع استبدال **YOUR_PREDICTION_URL**. 

    باستخدام نفس مربع الحوار، احصل على *مفتاح التنبؤ*. انسخ مفتاح التنبؤ المعروض بعد *تعيين عنوان مفتاح التنبؤ على*. الصقها في محرر التعليمات البرمجية، مع استبدال قيمة العنصر النائب **YOUR_PREDICTION_KEY**. 

    ![لقطة شاشة لعنوان URL للتوقع.](media/create-object-detection-solution/find-prediction-url.png)

    بعد لصق قيم عنوان URL للتنبؤ ومفتاح التنبؤ، يجب أن يتشابه أول سطرين من التعليمات البرمجية مع هذا:

    ```PowerShell
    $predictionUrl="https..."
    $predictionKey ="1a2b3c4d5e6f7g8h9i0j...."
    ```

1. في أعلى يمين جزء المحرر، استخدم الزر **...** لفتح القائمة ثم حدد **Save** لحفظ التغييرات. ثم افتح القائمة مرة أخرى وحدد **Close Editor**.

    ستستخدم نموذج تطبيق العميل لاكتشاف الكائنات في هذه الصورة:

    ![صورة لفاكهة](media/create-object-detection-solution/produce.jpg)

1. أدخل الأمر التالي في جزء PowerShell لتشغيل التعليمات البرمجية:

    ```PowerShell
    cd ai-900
    ./detect-objects.ps1 
    ```

1. راجع التوقع الذي يجب أن يكون *apple orange banana*.

## <a name="learn-more"></a>معرفة المزيد

يعرض هذا التطبيق البسيط بعض إمكانيات خدمة Custom Vision فقط. لمعرفة المزيد حول ما يمكنك القيام به بهذه الخدمة، راجع [صفحة الرؤية المخصصة](https://azure.microsoft.com/services/cognitive-services/custom-vision-service/).
